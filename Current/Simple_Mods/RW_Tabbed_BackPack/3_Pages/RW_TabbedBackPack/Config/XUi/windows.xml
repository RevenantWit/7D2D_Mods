<configs>

<conditional>
	<!-- Check to make sure Simple UI is not installed first to avoid conflicts -->
	<if cond="mod_loaded('RW_SimpleUI') == 'false'">

		<!--Remove backpack icon from top left of backpack grid header to make room for tabs-->
		<remove xpath="/windows/window[@name='windowBackpack']/panel/sprite[@name='windowIcon' and @sprite='ui_game_symbol_backpack']"/>

		<!--Remove "Inventory" text from top left of backpack grid header to make room for tabs-->
		<remove xpath="/windows/window[@name='windowBackpack']/panel/label[@name='windowName' and @text_key='xuiInventory']"/>

		<!--Remove the backpack grid from the vanilla backpack window-->
		<remove xpath="/windows/window[@name='windowBackpack']/panel[@name='content' and ./grid[@name='inventory']]"/>

		<!--Append the new tabbed backpack grid to the backpack window-->
		<append xpath="/windows/window[@name='windowBackpack']">

		<!--Tabs work differently depending on game version so apply a different tabbed grid based on game version-->
		<conditional>
			<if cond="game_version() &lt; version(1,2,0)">
				<!--Tabbed backpack grid for 7 Days v1.xx-->
				<rect name="tabs" controller="TabSelector" pos="0,0" size="606, 349">
					<rect name="tabsHeader" height="43" pos="0,0" depth="1">

						<grid name="tabButtons" depth="2" rows="1" cols="3" pos="3,-3" cell_width="35" cell_height="36" repeat_content="true">
							<rect >
								<simplebutton name="tabButton" width="35" height="36" depth="2" font_size="24" defaultcolor="0,0,0,1" selectedsprite="map_poi_editor" selectedcolor="[beige]" caption="{tab_name_localized}"/>
							</rect>
						</grid>
					</rect>
					<panel name="content" width="100%" height="303" depth="0" pos="0,-46" disableautobackground="true">
						<rect name="tabsContents" controller="Backpack">

							<sprite depth="8" name="backgroundMain" sprite="menu_empty3px" pos="0,0" width="606" height="336" color="[black]" type="sliced" fillcenter="false" on_press="true" gamepad_selectable="false"/>

							<rect tab_key="1">
								<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
									<backpack_item_stack on_scroll="true" name="0"/>
								</grid>
							</rect>

							<rect tab_key="2" pos="0,0">
								<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
									<backpack_item_stack on_scroll="true" name="0"/>
								</grid>
							</rect>

							<rect tab_key="3" pos="0,0">
								<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
									<backpack_item_stack on_scroll="true" name="0"/>
								</grid>
							</rect>
						</rect>
					</panel>
				</rect>
			</if>
			<else>
				<!--Tabbed backpack grid for 7 Days v2.xx-->
				<rect name="tabs" controller="TabSelector" pos="0,0" size="606, 349">
					<rect name="tabsHeader" height="43" pos="0,0" depth="1">

						<grid name="tabButtons" depth="2" rows="1" cols="3" pos="3,-3" cell_width="35" cell_height="36" repeat_content="true">
							<rect controller="TabSelectorButton" >
								<simplebutton name="tabButton" width="35" height="36" depth="2" font_size="24" defaultcolor="0,0,0,1" selectedsprite="map_poi_editor" selectedcolor="[beige]" caption="{tab_name_localized}"/>
							</rect>
						</grid>
					</rect>

					<rect name="tabsContents" controller="Backpack">
						<panel name="content" width="100%" height="303" depth="0" pos="0,-46" disableautobackground="true">
							<sprite depth="8" name="backgroundMain" sprite="menu_empty3px" pos="0,0" width="606" height="336" color="[black]" type="sliced" fillcenter="false" on_press="true" gamepad_selectable="false"/>

							<rect controller="TabSelectorTab" tab_key="1">
								<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
									<backpack_item_stack on_scroll="true" name="0"/>
								</grid>
							</rect>

							<rect controller="TabSelectorTab" tab_key="2" pos="0,0">
								<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
									<backpack_item_stack on_scroll="true" name="0"/>
								</grid>
							</rect>

							<rect controller="TabSelectorTab" tab_key="3" pos="0,0">
								<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
									<backpack_item_stack on_scroll="true" name="0"/>
								</grid>
							</rect>
						</panel>
					</rect>
				</rect>
			</else>
		</conditional>
		</append>

		<!-- Adjust looting window size to avoid errors with player dropped bag on death -->
		<set xpath="/windows/window[@name='windowLooting']/rect/grid/@rows">20</set>

	</if>
</conditional>

</configs>
