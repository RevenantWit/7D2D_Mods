<configs>

<remove xpath="/windows/window[@name='windowBackpack']"/>

<append xpath="/windows">

	<window name="windowBackpack" width="606" height="349" panel="Center" controller="BackpackWindow" cursor_area="true" >
		<panel name="header" height="43" depth="1" backgroundspritename="ui_game_panel_header">
			<!--sprite depth="3" name="windowIcon" style="icon32px" pivot="center" pos="21,-21" sprite="ui_game_symbol_backpack" />
			<label depth="3" name="windowName" pos="42,-6" width="180" height="32" text="INVENTORY" text_key="xuiInventory" font_size="32" /-->

			<rect pos="320,0" width="300" controller="ContainerStandardControls" move_start_bottom_left="true">
				<button depth="3" name="btnClearInventory" sprite="ui_game_symbol_trash" tooltip_key="lblClearInventory" pos="-45, -22" style="icon32px, press, hover" pivot="center" sound="[paging_click]" visible="{creativewindowopen}" defaultcolor="[iconColor]" hovercolor="[hoverColor]" selectedcolor="[selectedColor]" />

				<button   depth="3" name="btnToggleLockMode"          sprite="ui_game_symbol_lock"     tooltip_key="xuiStashLockModeToggle"             pos="0, -22" style="icon32px, press, hover" pivot="center" sound="[paging_click]" selected="{userlockmode}" />

				<button depth="3" name="btnSort"           sprite="ui_game_symbol_sort"  tooltip_key="lblSortContainer"  pos="50, -22" style="icon32px, press, hover" pivot="center" sound="[paging_click]" />
				
				<rect pos="0, 0" visible="{lootingorvehiclestorage}">
					<button   depth="3" name="btnMoveFillAndSmart" sprite="ui_game_symbol_store_similar_down" tooltip_key="lblStashFillAndSmart" pos="100, -22" style="icon32px, press, hover" pivot="center" sound="[paging_click]" />
					<button   depth="3" name="btnMoveAll"          sprite="ui_game_symbol_store_all_down"     tooltip_key="lblStashAll"             pos="150, -22" style="icon32px, press, hover" pivot="center" sound="[paging_click]" />
				</rect>
			</rect>

			<label depth="2" pos="492,-8" width="80" height="28" text="{currencyamount}" justify="right" />
			<sprite depth="4" name="costIcon" sprite="ui_game_symbol_coin" size="24,24" pos="577,-10" color="[white]" foregroundlayer="true" />
		</panel>

		<rect name="tabs" controller="TabSelector" pos="0,0" size="606, 349">
			<rect name="tabsHeader" height="43" pos="0,0" depth="1">

				<grid name="tabButtons" depth="2" rows="1" cols="6" pos="3,-3" cell_width="35" cell_height="36" repeat_content="true">
					<rect controller="TabSelectorButton" >
						<simplebutton name="tabButton" width="35" height="36" depth="2" font_size="24" defaultcolor="0,0,0,1" selectedsprite="map_poi_editor" selectedcolor="[beige]" caption="{tab_name_localized}"/>
					</rect>
				</grid>
			</rect>

			<rect name="tabsContents" controller="Backpack">
				<panel name="content" width="100%" height="303" depth="0" pos="0,-46" disableautobackground="true">
					<sprite depth="8" name="backgroundMain" sprite="menu_empty3px" pos="0,0" width="606" height="336" color="[black]" type="sliced" fillcenter="false" on_press="true"  gamepad_selectable="false"/>

					<rect controller="TabSelectorTab" tab_key="1">
						<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
							<backpack_item_stack on_scroll="true" name="0"/>
						</grid>
					</rect>

					<rect controller="TabSelectorTab" tab_key="2" pos="0,0">
						<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
							<backpack_item_stack on_scroll="true" name="0"/>
						</grid>
					</rect>

					<rect controller="TabSelectorTab" tab_key="3" pos="0,0">
						<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
							<backpack_item_stack on_scroll="true" name="0"/>
						</grid>
					</rect>

					<rect controller="TabSelectorTab" tab_key="4" pos="0,0">
						<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
							<backpack_item_stack on_scroll="true" name="0"/>
						</grid>
					</rect>

					<rect controller="TabSelectorTab" tab_key="5" pos="0,0">
						<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
							<backpack_item_stack on_scroll="true" name="0"/>
						</grid>
					</rect>

					<rect controller="TabSelectorTab" tab_key="6" pos="0,0">
						<grid depth="10" name="inventory" rows="5" cols="9" pos="3,-3" cell_width="67" cell_height="67" repeat_content="true" >
							<backpack_item_stack on_scroll="true" name="0"/>
						</grid>
					</rect>
				</panel>
			</rect>
		</rect>
	</window>

</append>

<!-- Adjust looting window size to avoid errors with player dropped bag -->
<set xpath="/windows/window[@name='windowLooting']/rect/grid/@rows">35</set>

<conditional>
	<if cond="mod_version('RWSUI_PlayerBackPackSize') == version(2,0)">
		<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">2</set>
		<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='3' or @tab_key='4' or @tab_key='5' or @tab_key='6']"/>
	</if>
	<if cond="mod_version('RWSUI_PlayerBackPackSize') == version(3,0)">
		<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">3</set>
		<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='4' or @tab_key='5' or @tab_key='6']"/>
	</if>
	<if cond="mod_version('RWSUI_PlayerBackPackSize') == version(4,0)">
		<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">4</set>
		<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='5' or @tab_key='6']"/>
	</if>
	<if cond="mod_version('RWSUI_PlayerBackPackSize') == version(5,0)">
		<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">5</set>
		<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='6']"/>
	</if>
	<if cond="mod_loaded('Gears')">
		<conditional>
			<if cond="modsetting('RW_SimpleUI', 'world', 'PlayerBackPack.PlayerBackPackSize') == '2_Pages'">
				<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">2</set>
				<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='3' or @tab_key='4' or @tab_key='5' or @tab_key='6']"/>
			</if>
			<if cond="modsetting('RW_SimpleUI', 'world', 'PlayerBackPack.PlayerBackPackSize') == '3_Pages'">
				<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">3</set>
				<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='4' or @tab_key='5' or @tab_key='6']"/>
			</if>
			<if cond="modsetting('RW_SimpleUI', 'world', 'PlayerBackPack.PlayerBackPackSize') == '4_Pages'">
				<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">4</set>
				<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='5' or @tab_key='6']"/>
			</if>
			<if cond="modsetting('RW_SimpleUI', 'world', 'PlayerBackPack.PlayerBackPackSize') == '5_Pages'">
				<set xpath="//window[@name='windowBackpack']/rect/rect/grid[@name='tabButtons']/@cols">5</set>
				<remove xpath="//window[@name='windowBackpack']/rect/rect/panel/rect[@tab_key='6']"/>
			</if>
		</conditional>
	</if>
</conditional>

</configs>
